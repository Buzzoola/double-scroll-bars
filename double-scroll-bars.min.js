/* AngularJS directives for double scroll bars by @przno, v0.1.3-alpha, https://github.com/przno/double-scroll-bars, MIT license */!function(a){"use strict";a.module("doubleScrollBars",[]).directive("doubleScrollBarHorizontal",["$timeout","scrollStorage","scrollBarNativeThickness",function(a,b,c){return{restrict:"A",transclude:!0,scope:{doubleScrollBarHorizontal:"@",id:"@"},template:"<div> <div style=\"overflow-y: hidden;\" data-ng-style=\"{height: nativeScrollBarHeight}\">   <div style=\"overflow-y: hidden; position: relative; top: -1px;\" data-ng-style=\"{'overflow-x': doubleScrollBarHorizontal == 'always' ? 'scroll' : 'auto', height: scrollBarElementHeight}\">    <div data-ng-style=\"{width: wrapper2scrollWidth, height: scrollBarElementHeight}\"></div>   </div> </div> <div data-ng-style=\"{'overflow-x': doubleScrollBarHorizontal == 'always' ? 'scroll' : 'auto'}\">  <div data-ng-transclude></div> </div></div>",link:function(d,e){d.nativeScrollBarHeight=c.get()+"px",d.scrollBarElementHeight=parseInt(c.get()+1)+"px",d.wrapper2scrollWidth="0px";var f=e.children().eq(0),g=f.children().eq(0).children().eq(0),h=f.children().eq(1),i=g[0],j=h[0];g.on("scroll",function(){j.scrollLeft=i.scrollLeft}),h.on("scroll",function(){i.scrollLeft=j.scrollLeft});var k=!0;d.$watch(function(){return d.wrapper2scrollWidth=j.scrollWidth+"px"},function(){a(function(){d.$apply(),k&&(i.scrollLeft=b.get(d.id)||0,j.scrollLeft=b.get(d.id)||0,k=!1)})}),d.$on("$destroy",function(){void 0!==d.id&&b.set(d.id,i.scrollLeft)})}}}]).directive("doubleScrollBarVertical",["$timeout","scrollStorage","scrollBarNativeThickness","$log",function(a,b,c,d){return{restrict:"A",transclude:!0,scope:{doubleScrollBarVertical:"@",id:"@"},template:"<div > <div style=\"overflow-x: hidden; float: left;\" data-ng-style=\"{width: nativeScrollBarWidth}\">   <div style=\"overflow-x: hidden; position: relative; left: -1px;\" data-ng-style=\"{'overflow-y': doubleScrollBarVertical == 'always' ? 'scroll' : 'auto', width: scrollBarElementWidth, height: origHeight}\">    <div data-ng-style=\"{height: wrapper2scrollHeight, width: scrollBarElementWidth}\"></div>   </div> </div> <div data-ng-style=\"{'overflow-y': doubleScrollBarVertical == 'always' ? 'scroll' : 'auto', height: origHeight}\" data-ng-transclude></div></div>",link:function(e,f){e.nativeScrollBarWidth=c.get()+"px",e.scrollBarElementWidth=parseInt(c.get()+1)+"px",e.wrapper2scrollHeight="0px";var g=f.children().eq(0),h=g.children().eq(0).children().eq(0),i=g.children().eq(1),j=h[0],k=i[0];d.log("wrapper2dom",k),e.$watch(function(){return f[0].style.height},function(a){e.origHeight=a,d.log("watch $scope.origHeight",e.origHeight)}),h.on("scroll",function(){d.log("on scroll wrapper1"),k.scrollTop=j.scrollTop}),i.on("scroll",function(){d.log("on scroll wrapper2"),j.scrollTop=k.scrollTop});var l=!0;e.$watch(function(){return d.log("wrapper2dom",k),d.log("watch wrapper2dom.scrollHeight",k.scrollHeight),e.wrapper2scrollHeight=k.scrollHeight+"px"},function(c){d.log("newValue",c),a(function(){e.$apply(),l&&(j.scrollTop=b.get(e.id)||0,k.scrollTop=b.get(e.id)||0,l=!1)})}),e.$on("$destroy",function(){void 0!==e.id&&b.set(e.id,j.scrollTop)})}}}]).service("scrollStorage",function(){var a={};return{get:function(b){return a[b]},set:function(b,c){a[b]=c}}}).service("scrollBarNativeThickness",function(){function a(){var a=document.createElement("div"),b=document.createElement("div");a.style.width="100%",a.style.height="200px",b.style.width="200px",b.style.height="150px",b.style.position="absolute",b.style.top="0",b.style.left="0",b.style.visibility="hidden",b.style.overflow="hidden",b.appendChild(a),document.body.appendChild(b);var c=a.offsetWidth;b.style.overflow="scroll";var d=b.clientWidth;return document.body.removeChild(b),c-d}var b;return{get:function(){return b=b||a()}}})}(angular);